import{s as se,b as re,o as ne,r as oe,n as ie,d as R}from"../chunks/scheduler.jWOD8KCp.js";import{S as ae,i as ce,e as p,b as P,s as V,o as ue,c as _,d as I,f as S,g as d,h as O,q as fe,n as c,j as T,k as u,r as de,l as x,t as he,a as pe,u as _e,A as U,w as me,p as L,y as K,z as B,v as ge}from"../chunks/index.QCzk_hSH.js";import{S as ve,e as Q,d as W,p as be}from"../chunks/SvelteToast.BCN_ZDWh.js";import{g as X,b as Z}from"../chunks/entry.DQz2_N2-.js";const ke=!0,He=Object.freeze(Object.defineProperty({__proto__:null,prerender:ke},Symbol.toStringTag,{value:"Module"}));function $(i,e,s){const r=i.slice();return r[12]=e[s],r[14]=s,r}function ee(i){let e;function s(l,n){if(l[5]===!0)return Ie;if(l[5]===!1)return ye}let r=s(i),t=r&&r(i);return{c(){t&&t.c(),e=U()},l(l){t&&t.l(l),e=U()},m(l,n){t&&t.m(l,n),T(l,e,n)},p(l,n){r!==(r=s(l))&&(t&&t.d(1),t=r&&r(l),t&&(t.c(),t.m(e.parentNode,e)))},d(l){l&&d(e),t&&t.d(l)}}}function ye(i){let e,s="<h4>The listener did not guess correctly in the previous round :(</h4>";return{c(){e=p("div"),e.innerHTML=s,this.h()},l(r){e=_(r,"DIV",{class:!0,"data-svelte-h":!0}),L(e)!=="svelte-8t1okp"&&(e.innerHTML=s),this.h()},h(){c(e,"class","col-lg-10 pt-md-1 pb-md-1 text-center")},m(r,t){T(r,e,t)},d(r){r&&d(e)}}}function Ie(i){let e,s="<h4>The listener guessed correctly in the previous round!</h4>";return{c(){e=p("div"),e.innerHTML=s,this.h()},l(r){e=_(r,"DIV",{class:!0,"data-svelte-h":!0}),L(e)!=="svelte-12sks5v"&&(e.innerHTML=s),this.h()},h(){c(e,"class","col-lg-10 pt-md-1 pb-md-1 text-center")},m(r,t){T(r,e,t)},d(r){r&&d(e)}}}function te(i){let e,s,r=Q(i[1]),t=[];for(let l=0;l<r.length;l+=1)t[l]=le($(i,r,l));return{c(){e=p("div"),s=p("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=_(l,"DIV",{class:!0});var n=I(e);s=_(n,"DIV",{class:!0});var o=I(s);for(let a=0;a<t.length;a+=1)t[a].l(o);o.forEach(d),n.forEach(d),this.h()},h(){c(s,"class","row"),c(e,"class","container")},m(l,n){T(l,e,n),u(e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,null)},p(l,n){if(n&6){r=Q(l[1]);let o;for(o=0;o<r.length;o+=1){const a=$(l,r,o);t[o]?t[o].p(a,n):(t[o]=le(a),t[o].c(),t[o].m(s,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=r.length}},d(l){l&&d(e),me(t,l)}}}function we(i){let e,s,r,t,l;return{c(){e=p("div"),s=p("img"),l=V(),this.h()},l(n){e=_(n,"DIV",{class:!0});var o=I(e);s=_(o,"IMG",{src:!0,class:!0,alt:!0}),l=O(o),o.forEach(d),this.h()},h(){R(s.src,r="https://storage.googleapis.com/docci/thumbnails/"+i[12]+".jpg")||c(s,"src",r),c(s,"class","img-fluid"),c(s,"alt",t=i[12]),c(e,"class","col")},m(n,o){T(n,e,o),u(e,s),u(e,l)},p(n,o){o&2&&!R(s.src,r="https://storage.googleapis.com/docci/thumbnails/"+n[12]+".jpg")&&c(s,"src",r),o&2&&t!==(t=n[12])&&c(s,"alt",t)},d(n){n&&d(e)}}}function Ce(i){let e,s,r,t,l;return{c(){e=p("div"),s=p("img"),l=V(),this.h()},l(n){e=_(n,"DIV",{class:!0});var o=I(e);s=_(o,"IMG",{src:!0,class:!0,alt:!0,style:!0}),l=O(o),o.forEach(d),this.h()},h(){R(s.src,r="https://storage.googleapis.com/docci/thumbnails/"+i[12]+".jpg")||c(s,"src",r),c(s,"class","img-fluid"),c(s,"alt",t=i[12]),ge(s,"border","10px solid green"),c(e,"class","col")},m(n,o){T(n,e,o),u(e,s),u(e,l)},p(n,o){o&2&&!R(s.src,r="https://storage.googleapis.com/docci/thumbnails/"+n[12]+".jpg")&&c(s,"src",r),o&2&&t!==(t=n[12])&&c(s,"alt",t)},d(n){n&&d(e)}}}function le(i){let e;function s(l,n){return l[14]==l[2]?Ce:we}let r=s(i),t=r(i);return{c(){t.c(),e=U()},l(l){t.l(l),e=U()},m(l,n){t.m(l,n),T(l,e,n)},p(l,n){r===(r=s(l))&&t?t.p(l,n):(t.d(1),t=r(l),t&&(t.c(),t.m(e.parentNode,e)))},d(l){l&&d(e),t.d(l)}}}function Ee(i){let e,s,r,t="Enter description",l,n,o,a,h,C="Submit",E,j;return{c(){e=p("div"),s=p("div"),r=p("span"),r.textContent=t,l=V(),n=p("input"),o=V(),a=p("div"),h=p("button"),h.textContent=C,this.h()},l(b){e=_(b,"DIV",{class:!0});var y=I(e);s=_(y,"DIV",{class:!0});var k=I(s);r=_(k,"SPAN",{class:!0,"data-svelte-h":!0}),L(r)!=="svelte-voah7z"&&(r.textContent=t),l=O(k),n=_(k,"INPUT",{type:!0,class:!0}),k.forEach(d),o=O(y),a=_(y,"DIV",{class:!0});var w=I(a);h=_(w,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),L(h)!=="svelte-mhqzbe"&&(h.textContent=C),w.forEach(d),y.forEach(d),this.h()},h(){c(r,"class","input-group-text"),c(n,"type","text"),c(n,"class","form-control"),c(s,"class","input-group col"),c(h,"type","submit"),c(h,"class","btn btn-primary col-auto"),c(a,"class","col"),c(e,"class","row gx-1")},m(b,y){T(b,e,y),u(e,s),u(s,r),u(s,l),u(s,n),K(n,i[3]),u(e,o),u(e,a),u(a,h),E||(j=[B(n,"input",i[8]),B(h,"click",i[7])],E=!0)},p(b,y){y&8&&n.value!==b[3]&&K(n,b[3])},d(b){b&&d(e),E=!1,oe(j)}}}function De(i){let e,s,r,t="Click when listener is done",l,n;return{c(){e=p("div"),s=p("div"),r=p("button"),r.textContent=t,this.h()},l(o){e=_(o,"DIV",{class:!0});var a=I(e);s=_(a,"DIV",{class:!0});var h=I(s);r=_(h,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),L(r)!=="svelte-1t5km5y"&&(r.textContent=t),h.forEach(d),a.forEach(d),this.h()},h(){c(r,"type","submit"),c(r,"class","btn btn-primary col-auto"),c(s,"class","col"),c(e,"class","row gx-1")},m(o,a){T(o,e,a),u(e,s),u(s,r),l||(n=B(r,"click",i[7]),l=!0)},p:ie,d(o){o&&d(e),l=!1,n()}}}function Te(i){let e,s,r,t,l,n,o,a,h,C,E,j="9",b,y,k,w,q,z,M,N,g=i[0]>0&&!i[4]&&ee(i),v=i[1]&&te(i);function F(f,m){return f[4]?De:Ee}let G=F(i),D=G(i);return M=new ve({}),{c(){e=p("div"),s=p("div"),r=p("h2"),t=P("You are now the speaker in the pair "),l=P(i[6]),n=V(),o=p("div"),a=p("h4"),h=P("Completed "),C=P(i[0]),E=P(" of "),b=P(j),y=P(" rounds in this game"),k=V(),g&&g.c(),w=V(),v&&v.c(),q=V(),D.c(),z=V(),ue(M.$$.fragment),this.h()},l(f){e=_(f,"DIV",{class:!0});var m=I(e);s=_(m,"DIV",{class:!0});var Y=I(s);r=_(Y,"H2",{});var A=I(r);t=S(A,"You are now the speaker in the pair "),l=S(A,i[6]),A.forEach(d),Y.forEach(d),n=O(m),o=_(m,"DIV",{class:!0});var J=I(o);a=_(J,"H4",{});var H=I(a);h=S(H,"Completed "),C=S(H,i[0]),E=S(H," of "),b=S(H,j),y=S(H," rounds in this game"),H.forEach(d),J.forEach(d),k=O(m),g&&g.l(m),w=O(m),v&&v.l(m),q=O(m),D.l(m),z=O(m),fe(M.$$.fragment,m),m.forEach(d),this.h()},h(){c(s,"class","col-lg-10 pt-md-1 pb-md-1 text-center"),c(o,"class","col-lg-10 pt-md-1 pb-md-1 text-center"),c(e,"class","col-lg-10 mx-auto p-3 py-md-5")},m(f,m){T(f,e,m),u(e,s),u(s,r),u(r,t),u(r,l),u(e,n),u(e,o),u(o,a),u(a,h),u(a,C),u(a,E),u(a,b),u(a,y),u(e,k),g&&g.m(e,null),u(e,w),v&&v.m(e,null),u(e,q),D.m(e,null),u(e,z),de(M,e,null),N=!0},p(f,[m]){(!N||m&64)&&x(l,f[6]),(!N||m&1)&&x(C,f[0]),f[0]>0&&!f[4]?g?g.p(f,m):(g=ee(f),g.c(),g.m(e,w)):g&&(g.d(1),g=null),f[1]?v?v.p(f,m):(v=te(f),v.c(),v.m(e,q)):v&&(v.d(1),v=null),G===(G=F(f))&&D?D.p(f,m):(D.d(1),D=G(f),D&&(D.c(),D.m(e,z)))},i(f){N||(he(M.$$.fragment,f),N=!0)},o(f){pe(M.$$.fragment,f),N=!1},d(f){f&&d(e),g&&g.d(),v&&v.d(),D.d(),_e(M)}}}function Ve(i){return i.hasOwnProperty("message")&&i.hasOwnProperty("selection")}function Oe(i){for(let e=0;e<i.length;e++){let r=i[e].rounds;for(let t=0;t<r.length;t++){let l=r[t];if(!Ve(l))return{gameIndex:e,roundIndex:t}}}return null}function je(i,e,s){let r;re(i,be,k=>s(6,r=k));let t=null,l=null,n=null,o=null,a=null,h="",C=!1,E=null;async function j(){h.length>0&&await fetch(`${W}/pairs/${r}/${l}/rounds/${t}.json`,{method:"PUT",body:JSON.stringify({message:h,target:n[l].rounds[t].target})}),s(3,h=""),await b().then(k=>{})}async function b(){s(4,C=!1),r.length==0&&X(`${Z}/docci/speaker/login`);let k=await fetch(`${W}/pairs.json`).then(w=>w.json());if(console.log(k),k.hasOwnProperty(r)){n=k[r];let w=Oe(n);l=w.gameIndex,s(0,t=w.roundIndex),console.log(l,t),t>0&&(n[l].rounds[t-1].selection==n[l].rounds[t-1].target?s(5,E=!0):s(5,E=!1))}else X(`${Z}/docci/speaker/login`);s(1,o=n[l].speaker_view),s(2,a=o.indexOf(n[l].rounds[t].target)),n[l].rounds[t].hasOwnProperty("message")&&!n[l].rounds[t].hasOwnProperty("selection")&&s(4,C=!0)}ne(b);function y(){h=this.value,s(3,h)}return[t,o,a,h,C,E,r,j,y]}class Le extends ae{constructor(e){super(),ce(this,e,je,Te,se,{})}}export{Le as component,He as universal};
