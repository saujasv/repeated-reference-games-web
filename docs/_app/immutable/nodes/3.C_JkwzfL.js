import{s as le,b as ne,o as se,d as G,n as ee}from"../chunks/scheduler.jWOD8KCp.js";import{S as re,i as ie,e as g,s as S,b as $,o as oe,c as v,d as I,p as z,h as j,f as q,g as m,q as ae,n as d,j as O,k as f,r as ue,l as te,t as ce,a as fe,u as de,v as H,w as _e,x as he,y as Y,z as R,A}from"../chunks/index.QCzk_hSH.js";import{S as pe,e as F,d as J,p as me}from"../chunks/SvelteToast.EJHjbQBI.js";import{g as K,b as Q}from"../chunks/entry.BUaNrUNu.js";const ge=!0,je=Object.freeze(Object.defineProperty({__proto__:null,prerender:ge},Symbol.toStringTag,{value:"Module"}));function W(i,e,l){const t=i.slice();return t[13]=e[l],t}function ve(i){let e;function l(r,s){if(r[5]===!0)return ke;if(r[5]===!1)return ye}let t=l(i),n=t&&t(i);return{c(){n&&n.c(),e=A()},l(r){n&&n.l(r),e=A()},m(r,s){n&&n.m(r,s),O(r,e,s)},p(r,s){t!==(t=l(r))&&(n&&n.d(1),n=t&&t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&m(e),n&&n.d(r)}}}function be(i){let e,l,t,n="Description:",r,s;return{c(){e=g("div"),l=g("h5"),t=g("em"),t.textContent=n,r=S(),s=$(i[2]),this.h()},l(o){e=v(o,"DIV",{class:!0});var a=I(e);l=v(a,"H5",{});var c=I(l);t=v(c,"EM",{"data-svelte-h":!0}),z(t)!=="svelte-pral7m"&&(t.textContent=n),r=j(c),s=q(c,i[2]),c.forEach(m),a.forEach(m),this.h()},h(){d(e,"class","col-lg-10 pt-md-1 pb-md-1 text-center")},m(o,a){O(o,e,a),f(e,l),f(l,t),f(l,r),f(l,s)},p(o,a){a&4&&te(s,o[2])},d(o){o&&m(e)}}}function ye(i){let e,l="<h5>Your guess was incorrect :(</h5>";return{c(){e=g("div"),e.innerHTML=l,this.h()},l(t){e=v(t,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-azzqa1"&&(e.innerHTML=l),this.h()},h(){d(e,"class","col-lg-10 pt-md-1 pb-md-1 text-center")},m(t,n){O(t,e,n)},d(t){t&&m(e)}}}function ke(i){let e,l="<h5>Your guess was correct!</h5>";return{c(){e=g("div"),e.innerHTML=l,this.h()},l(t){e=v(t,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1l5i0of"&&(e.innerHTML=l),this.h()},h(){d(e,"class","col-lg-10 pt-md-1 pb-md-1 text-center")},m(t,n){O(t,e,n)},d(t){t&&m(e)}}}function X(i){let e,l=F(i[1]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Z(W(i,l,n));return{c(){e=g("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=v(n,"DIV",{style:!0});var r=I(e);for(let s=0;s<t.length;s+=1)t[s].l(r);r.forEach(m),this.h()},h(){H(e,"display","flex")},m(n,r){O(n,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(n,r){if(r&10){l=F(n[1]);let s;for(s=0;s<l.length;s+=1){const o=W(n,l,s);t[s]?t[s].p(o,r):(t[s]=Z(o),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(n){n&&m(e),_e(t,n)}}}function Z(i){let e,l,t,n,r=!1,s,o,a,c,w,C,D,E,V,M,k;return V=he(i[8][0]),{c(){e=g("div"),l=g("input"),s=S(),o=g("label"),a=g("img"),E=S(),this.h()},l(u){e=v(u,"DIV",{style:!0});var h=I(e);l=v(h,"INPUT",{type:!0,id:!0,name:!0,style:!0}),s=j(h),o=v(h,"LABEL",{for:!0,style:!0});var N=I(o);a=v(N,"IMG",{src:!0,alt:!0,style:!0}),N.forEach(m),E=j(h),h.forEach(m),this.h()},h(){d(l,"type","radio"),d(l,"id",t=i[13]),d(l,"name","imageOptions"),l.__value=n=i[13],Y(l,l.__value),H(l,"display","none"),G(a.src,c=`https://storage.googleapis.com/docci/thumbnails/${i[13]}.jpg`)||d(a,"src",c),d(a,"alt",w=i[13]),d(a,"style",C="width: 100%; height: auto; "+(i[3]===i[13]?"border: 10px solid green; border-radius: 5px;":"")),d(o,"for",D=i[13]),H(o,"display","block"),H(o,"cursor","pointer"),H(o,"padding","5px"),H(e,"flex","1"),H(e,"text-align","center"),V.p(l)},m(u,h){O(u,e,h),f(e,l),l.checked=l.__value===i[3],f(e,s),f(e,o),f(o,a),f(e,E),M||(k=R(l,"change",i[7]),M=!0)},p(u,h){h&2&&t!==(t=u[13])&&d(l,"id",t),h&2&&n!==(n=u[13])&&(l.__value=n,Y(l,l.__value),r=!0),(r||h&10)&&(l.checked=l.__value===u[3]),h&2&&!G(a.src,c=`https://storage.googleapis.com/docci/thumbnails/${u[13]}.jpg`)&&d(a,"src",c),h&2&&w!==(w=u[13])&&d(a,"alt",w),h&10&&C!==(C="width: 100%; height: auto; "+(u[3]===u[13]?"border: 10px solid green; border-radius: 5px;":""))&&d(a,"style",C),h&2&&D!==(D=u[13])&&d(o,"for",D)},d(u){u&&m(e),V.r(),M=!1,k()}}}function we(i){let e,l,t,n="Submit",r,s;return{c(){e=g("div"),l=g("div"),t=g("button"),t.textContent=n,this.h()},l(o){e=v(o,"DIV",{class:!0});var a=I(e);l=v(a,"DIV",{class:!0});var c=I(l);t=v(c,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),z(t)!=="svelte-mhqzbe"&&(t.textContent=n),c.forEach(m),a.forEach(m),this.h()},h(){d(t,"type","submit"),d(t,"class","btn btn-primary col-auto"),d(l,"class","col"),d(e,"class","row gx-1")},m(o,a){O(o,e,a),f(e,l),f(l,t),r||(s=R(t,"click",i[6]),r=!0)},p:ee,d(o){o&&m(e),r=!1,s()}}}function Ie(i){let e,l,t,n="Click when speaker is done",r,s;return{c(){e=g("div"),l=g("div"),t=g("button"),t.textContent=n,this.h()},l(o){e=v(o,"DIV",{class:!0});var a=I(e);l=v(a,"DIV",{class:!0});var c=I(l);t=v(c,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),z(t)!=="svelte-52tn63"&&(t.textContent=n),c.forEach(m),a.forEach(m),this.h()},h(){d(t,"type","submit"),d(t,"class","btn btn-primary col-auto"),d(l,"class","col"),d(e,"class","row gx-1")},m(o,a){O(o,e,a),f(e,l),f(l,t),r||(s=R(t,"click",i[6]),r=!0)},p:ee,d(o){o&&m(e),r=!1,s()}}}function Ce(i){let e,l,t="<h2>You are the listener</h2>",n,r,s,o,a,c,w="9",C,D,E,V,M,k,u,h;function N(_,p){if(!_[4])return be;if(_[0]>0)return ve}let L=N(i),b=L&&L(i),y=i[1]&&X(i);function U(_,p){return _[4]?Ie:we}let x=U(i),T=x(i);return u=new pe({}),{c(){e=g("div"),l=g("div"),l.innerHTML=t,n=S(),r=g("div"),s=g("h4"),o=$("Completed "),a=$(i[0]),c=$(" of "),C=$(w),D=$(" rounds in this game"),E=S(),b&&b.c(),V=S(),y&&y.c(),M=S(),T.c(),k=S(),oe(u.$$.fragment),this.h()},l(_){e=v(_,"DIV",{class:!0});var p=I(e);l=v(p,"DIV",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-368nw1"&&(l.innerHTML=t),n=j(p),r=v(p,"DIV",{class:!0});var B=I(r);s=v(B,"H4",{});var P=I(s);o=q(P,"Completed "),a=q(P,i[0]),c=q(P," of "),C=q(P,w),D=q(P," rounds in this game"),P.forEach(m),B.forEach(m),E=j(p),b&&b.l(p),V=j(p),y&&y.l(p),M=j(p),T.l(p),k=j(p),ae(u.$$.fragment,p),p.forEach(m),this.h()},h(){d(l,"class","col-lg-10 pt-md-1 pb-md-1 text-center"),d(r,"class","col-lg-10 pt-md-1 pb-md-1 text-center"),d(e,"class","col-lg-10 mx-auto p-3 py-md-5")},m(_,p){O(_,e,p),f(e,l),f(e,n),f(e,r),f(r,s),f(s,o),f(s,a),f(s,c),f(s,C),f(s,D),f(e,E),b&&b.m(e,null),f(e,V),y&&y.m(e,null),f(e,M),T.m(e,null),f(e,k),ue(u,e,null),h=!0},p(_,[p]){(!h||p&1)&&te(a,_[0]),L===(L=N(_))&&b?b.p(_,p):(b&&b.d(1),b=L&&L(_),b&&(b.c(),b.m(e,V))),_[1]?y?y.p(_,p):(y=X(_),y.c(),y.m(e,M)):y&&(y.d(1),y=null),x===(x=U(_))&&T?T.p(_,p):(T.d(1),T=x(_),T&&(T.c(),T.m(e,k)))},i(_){h||(ce(u.$$.fragment,_),h=!0)},o(_){fe(u.$$.fragment,_),h=!1},d(_){_&&m(e),b&&b.d(),y&&y.d(),T.d(),de(u)}}}function Ee(i){return i.hasOwnProperty("message")&&i.hasOwnProperty("selection")}function Te(i){for(let e=0;e<i.length;e++){let t=i[e].rounds;for(let n=0;n<t.length;n++){let r=t[n];if(!Ee(r))return{gameIndex:e,roundIndex:n}}}return null}function De(i,e,l){let t;ne(i,me,k=>l(11,t=k));let n=null,r=null,s=null,o=null,a=null,c=null,w=!1,C=null;async function D(){if(w){await E().then(k=>{}),l(4,w=!1);return}c.length>0&&await fetch(`${J}/pairs/${t}/${r}/rounds/${n}.json`,{method:"PUT",body:JSON.stringify({message:s[r].rounds[n].message,target:s[r].rounds[n].target,selection:c})}),l(3,c=null),await E().then(k=>{})}async function E(){t.length==0&&K(`${Q}/docci/listener/login`);let k=await fetch(`${J}/pairs.json`).then(u=>u.json());if(console.log(k),k.hasOwnProperty(t)){s=k[t];let u=Te(s);r=u.gameIndex,l(0,n=u.roundIndex),n>0&&l(5,C=s[r].rounds[n-1].target===s[r].rounds[n-1].selection)}else K(`${Q}/docci/listener/login`);l(1,o=s[r].speaker_view),s[r].rounds[n].hasOwnProperty("message")?l(2,a=s[r].rounds[n].message):l(4,w=!0)}se(E);const V=[[]];function M(){c=this.__value,l(3,c)}return[n,o,a,c,w,C,D,M,V]}class He extends re{constructor(e){super(),ie(this,e,De,Ce,le,{})}}export{He as component,je as universal};
